import os
import random

def update_ver_to_cal(group, cal_ver, path, file_list):
	random.seed(42)  # Seed for reproducibility
	
	for filename in file_list:
		file_path = os.path.join(path, filename)
		
		if not os.path.isfile(file_path):
			print("File not found:", file_path)
			continue
		
		with open(file_path, 'r') as f:
			lines = f.readlines()
		
		matched_lines = [i for i, line in enumerate(lines) if group in line and cal_ver in line]

		if not matched_lines:
			print("No lines found in", filename, "with both", group, "and", cal_ver)
			continue
		
		# Select roughly half the lines
		lines_to_change = random.sample(matched_lines, len(matched_lines) // 2)
		
		changed_count = 0
		for i in lines_to_change:
			if "VER" in lines[i]:
				lines[i] = lines[i].replace("VER", "CAL", 1)
				changed_count += 1
		
		with open(file_path, 'w') as f:
			f.writelines(lines)
		
		print("Processed", filename, ":", changed_count, "line(s) modified.")