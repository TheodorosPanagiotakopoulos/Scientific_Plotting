import pandas as pd
import numpy as np

def compute_metrics_for_dict(data_dict):
    for key, df in data_dict.items():
        if 'max_aitable' in df.columns:
            # Calculate RMSE
            squared = df['max_aitable'] ** 2
            rmse = np.sqrt(squared.sum() / len(squared))
            
            # Calculate MAX
            max_val = df['max_aitable'].max()
            
            # Create RMSE and MAX columns with NaNs
            df['RMSE'] = np.nan
            df['MAX'] = np.nan
            
            # Ensure index starts from 1
            if df.index.min() != 1:
                df.index = range(1, len(df) + 1)
            
            # Set values at index 1
            df.at[1, 'RMSE'] = rmse
            df.at[1, 'MAX'] = max_val
            
            # Update the dataframe in the dictionary
            data_dict[key] = df

    return data_dict