import pandas as pd
import numpy as np

def compute_rmse_for_dict(data_dict):
    for key, df in data_dict.items():
        if 'max_aitable' in df.columns:
            # Calculate RMSE
            squared = df['max_aitable'] ** 2
            rmse = np.sqrt(squared.sum() / len(squared))
            
            # Create RMSE column with NaNs
            df['RMSE'] = np.nan
            
            # Set RMSE value at the top (index 1)
            if 1 in df.index:
                df.at[1, 'RMSE'] = rmse
            else:
                # Reindex if necessary to ensure index starts from 1
                df.index = range(1, len(df) + 1)
                df.at[1, 'RMSE'] = rmse
                
            # Update the dataframe in the dictionary
            data_dict[key] = df
            
    return data_dict