import os
import random

def copy_half_matching_lines(group, cal_ver, path, file_list, tmp_file_name, seed=42):
    matching_lines = []

    # Collect matching lines
    for filename in file_list:
        full_path = os.path.join(path, filename)
        if not os.path.isfile(full_path):
            continue  # Skip if not a file
        with open(full_path, 'r') as f:
            for line in f:
                if group in line and cal_ver in line:
                    matching_lines.append(line)
    
    # Randomly select approx half the lines
    random.seed(seed)
    selected_lines = random.sample(matching_lines, k=len(matching_lines)//2)

    # Write to tmp file
    with open(tmp_file_name, 'w') as tmp_file:
        tmp_file.writelines(selected_lines)